<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Outback Gems</title>
  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="navbar.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="icon" type="image/png" href="images/favicon.png">
</head>

<body>

  <header id="navbar-container"></header>
  <script src="navbar.js"></script>
  <script src="productCache.js"></script>

  <section id="home">
    <div class="hero-overlay">
      <h2>Your Destination for Premium Faceting Rough and Australian Gems &amp; Minerals</h2>
      <p>Explore our range of high-quality faceting rough, including synthetic and natural stones, minerals, and a
        variety of faceting and fossicking essentials.</p>
    </div>
  </section>


  <div class="banner-slider">
    <div class="banner">
      <div class="banner-item">
        <p>Free Standard Shipping On Orders Over $100</p>
      </div>
      <div class="banner-item">
        <p>Express Shipping From $14.45</p>
      </div>
    </div>
  </div>

  <section class="about-us" aria-label="About us">

    <div class="who-we-are">
      <h2>Who We Are</h2>
      <p>Outback Gems &amp; Minerals specializes in gemstone rough, with a focus on natural and synthetic faceting
        materials. We provide high-quality materials that cater to the needs of faceting enthusiasts, hobbyists, and
        collectors.</p>
    </div>

    <div class="what-we-do">
      <h2>What We Do</h2>
      <p>We offer a broad range of products for faceting, fossicking, and collecting, from sapphires and zircons to
        unique minerals and other essentials. Our goal is to make high-quality materials easily accessible for those who
        appreciate the craft and beauty of lapidary.</p>
    </div>


    <!-- <div class="Why-Choose-Usr"> Possibly add in as a Fourth Box 
      <h2>Why Choose Us</h2>
      <p>With firsthand experience in fossicking and faceting, we know what makes quality rough. We handpick stock that delivers both beauty and value to cutters and collectors alike.</p>
  </div> -->


    <div class="what-we-offer">
      <h2>What We Offer</h2>
      <ul role="list">
        <li>Premium Australian gemstones &amp; other materials</li>
        <li>High-quality synthetic faceting rough</li>
        <li>Gemstone wash bags for fossicking at home</li>
        <li>A wide range of minerals and related products</li>
      </ul>
    </div>

  </section>

  <section id="bestsellers">
    <div class="bestsellers-container">
      <div class="bestselling-header-box">
        <h2 class="bestselling-header">Bestselling Items</h2>
      </div>

      <div class="divider"></div>

      <div class="bestseller-product-cards">
        <!-- Bestseller product cards will be injected here by JavaScript -->
      </div>

      <a href="products.html?category="><button class="view-all-button">View All Products</button></a>
    </div>
  </section>

  <section class="whats-new-carousel">
    <div class="whats-new-header-box">
      <h2 class="whats-new-header">What's New</h2>
    </div>
    <div class="divider"></div>
    <div class="swiper whats-new-swiper">
      <div class="swiper-wrapper" aria-label="Product carousel">
        <!-- Whats New product cards will be injected here as .swiper-slide by JS -->
      </div>
      <div class="swiper-button-next" aria-label="Next slide"></div>
      <div class="swiper-button-prev" aria-label="Previous slide"></div>
      <!-- Pagination is hidden by CSS, but you can remove this line if you wish -->
      <div class="swiper-pagination"></div>
    </div>
    <a href="products.html?category="><button class="view-all-button">View All Products</button></a>
  </section>

  <div class="newsletter-divider"></div>

  <section class="newsletter-signup">
    <div class="newsletter-container">
      <h2>Sign Up for Our Newsletter</h2>

       
       
      <p>Sign up here to stay updated with the latest news and offers from Outback Gems &amp; Minerals:</p>
      <form action="https://script.google.com/macros/s/AKfycbxXCspp43Dd21cSB34eju-qTBLi01vVFrwzEuZzvDViB5QmKf7dqLlWPin2Ijr-B6X1IA/exec" method="post">
        <input type="email" name="email" autocomplete="email" placeholder="outbackgems@outlook.com" required />
        <button type="submit">Subscribe</button>
      </form>
    </div>
  </section>


  <footer>
    <div class="footer-left">
      <p><a href="privacypolicy.html">Privacy Policy</a></p>
      <p><a href="termsofuse.html">Terms Of Use</a></p>
    </div>
    <div class="footer-middle">
      <p>&copy; 2025 Outback Gems &amp; Minerals. All rights reserved.</p>
      <p>ABN: 53 418 745 121</p>
    </div>
    <div class="footer-right">
      <p><a href="mailto:support@outbackgems.com.au"><i class="fa fa-envelope" aria-hidden="true" style="color:white"></i></a></p>
      <p><a href="https://www.facebook.com/profile.php?id=61576738875731"><i class="fa fa-facebook-square" aria-hidden="true"
            style="color:white"></i></a></p>
    </div>
  </footer>

  
  
  <script>
  // Background image rotation
  const images = ["images/banners/Banner 1.jpg", "images/banners/Banner 2.jpg", "images/banners/Banner 3.jpg", "images/banners/Banner 4.jpg"];
    let current = 0;

    setInterval(() => {
      current = (current + 1) % images.length;
      document.getElementById("home").style.backgroundImage = `url('${images[current]}')`;
    }, 15000); // Change image every 15 seconds

    // #region banner carousel script
    const itemTrack = document.querySelector('.banner');
    const items = document.querySelectorAll('.banner-item');
    const visibleMessages = 1;
    let itemIndex = 0;
  
    // Clone first item(s) and append to end only if there are enough items
    if (items.length > visibleMessages) {
      for (let i = 0; i < visibleMessages; i++) {
        const clone = items[i].cloneNode(true);
        itemTrack.appendChild(clone);
      }
    }
  
    const totalItems = document.querySelectorAll('.banner-item').length;
    setInterval(() => {
      itemIndex++;
      itemTrack.style.transition = 'transform 0.7s ease-in-out';
      itemTrack.style.transform = `translateX(-${itemIndex * 100}%)`;
  
      if (itemIndex === totalItems - visibleMessages) {
        setTimeout(() => {
          itemTrack.style.transition = 'none';
          itemTrack.style.transform = `translateX(0%)`;
          itemIndex = 0;
        }, 700); // Match the transition duration
      }
    }, 5000);
    // #endregion
  
    // #region whats new carousel script
    document.addEventListener("DOMContentLoaded", function () {
    const productTrack = document.querySelector('.carousel-track');
    const products = document.querySelectorAll('.new-product-card');
    const visibleCount = 3;
    let productIndex = 0;

    //Check carousel has properly loaded to prevent errors
     if (!productTrack || products.length === 0) return;
  
    // Clone first visibleCount cards and append to the end only if there are enough cards
    if (products.length > visibleCount) {
      for (let i = 0; i < visibleCount; i++) {
        const clone = products[i].cloneNode(true);
        productTrack.appendChild(clone);
      }
    }
  
    const totalCards = document.querySelectorAll('.new-product-card').length;
    const cardWidth = 100 / totalCards;
    setInterval(() => {
      productIndex++;
      productTrack.style.transition = 'transform 0.7s ease-in-out';
      productTrack.style.transform = `translateX(-${productIndex * (100 / visibleCount)}%)`;
  
      // Reset position after animation if clone limit reached
      if (productIndex === products.length) {
        setTimeout(() => {
          productTrack.style.transition = 'none';
          productTrack.style.transform = `translateX(0%)`;
          productIndex = 0;
        }, 700); // Match the transition duration
      }
    }, 7000); // Rotate every 7 seconds
    });
    // #endregion
  
      // Newsletter form validation
  document.querySelector('.newsletter-container form').addEventListener('submit', function (e) {
  e.preventDefault();

  const form = this;
  const emailInput = form.querySelector('input[name="email"]');
  const email = emailInput.value.trim();
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  // Basic email validation
  if (!emailRegex.test(email)) {
    alert('Please enter a valid email address.');
    return;
  }

  // Submit to Google Apps Script
  fetch(form.action, {
    method: 'POST',
    body: new FormData(form),
    mode: 'no-cors'
  }).then(() => {
    alert('Thank you for subscribing!');
    form.reset();
  }).catch(() => {
    alert('There was an error. Please try again.');
  });
});
  

    document.addEventListener("DOMContentLoaded", function () {
  const bestsellerGrid = document.querySelector('.bestseller-product-cards');

  // Add loading message
  const loadingMsg = document.createElement("div");
  loadingMsg.textContent = "Loading Bestsellers...";
  loadingMsg.style.color = "#cc5500";
  loadingMsg.style.fontSize = "2rem";
  loadingMsg.style.textAlign = "center";
  loadingMsg.style.padding = "40px 0";
  bestsellerGrid.appendChild(loadingMsg);

  
  getProductData()
    .then(data => {
      // Remove loading message
      bestsellerGrid.innerHTML = "";

      const bestsellerItems = data.filter(product => product.bestseller && product.bestseller.toLowerCase() === "y");

      // Shuffle and pick 3 random products
      const shuffled = bestsellerItems.sort(() => 0.5 - Math.random()).slice(0, 3);

      shuffled.forEach(product => {
        const card = document.createElement("div");
        card.className = "bestseller-product-card";

        // Image
        const imageContainer = document.createElement("div");
        imageContainer.className = "image-container";
        const img = document.createElement("img");
        img.src = product["image url"];
        img.alt = product["product name"] || "Product Image";
        imageContainer.appendChild(img);

        // Name
        const name = document.createElement("h3");
        name.textContent = product["product name"];

        // Description
        const desc = document.createElement("p");
        desc.textContent = product.description;

        // Button
        const button = document.createElement("button");
        button.className = "bestseller-product-button";
        button.textContent = "View";
        button.onclick = () => {
          window.location.href = `view-product.html?productid=${encodeURIComponent(product["product id"])}`;
        };

        // Assemble card
        card.appendChild(imageContainer);
        card.appendChild(name);
        card.appendChild(desc);
        card.appendChild(button);

        bestsellerGrid.appendChild(card);
      });
    })
    .catch(error => {
      bestsellerGrid.innerHTML = "<p style='color:#cc5500; font-size:2rem; text-align:center; padding:40px 0;'>Failed to load products.</p>";
      console.error(error);
    });
});


document.addEventListener("DOMContentLoaded", function () {
  const swiperWrapper = document.querySelector('.whats-new-swiper .swiper-wrapper');

  // Add loading message
  const loadingMsg = document.createElement("div");
  loadingMsg.textContent = "Loading What's New...";
  loadingMsg.style.color = "#cc5500";
  loadingMsg.style.fontSize = "2rem";
  loadingMsg.style.textAlign = "center";
  loadingMsg.style.padding = "40px 0";
  swiperWrapper.appendChild(loadingMsg);

getProductData()
  .then(data => {
      swiperWrapper.innerHTML = ""; // Remove loading message
      const newItems = data.filter(product => product.newitem && product.newitem.toLowerCase() === "y")

      // Shuffle and pick up to 6 random products for the carousel
      const shuffled = newItems.sort(() => 0.5 - Math.random()).slice(0, 6);

      shuffled.forEach(product => {
        const slide = document.createElement("div");
        slide.className = "swiper-slide";
        slide.innerHTML = `
          <div class="whatsnew-product-card">
            <div class="image-container">
              <img src="${product["image url"]}" alt="${product["product name"] || "Product Image"}">
            </div>
            <h3>${product["product name"]}</h3>
            <p>${product.description}</p>
            <button class="whatsnew-product-button" onclick="window.location.href='view-product.html?productid=${encodeURIComponent(product["product id"])}'">View</button>
          </div>
        `;
        swiperWrapper.appendChild(slide);
      });

      // Initialize Swiper after slides are added
      new Swiper('.whats-new-swiper', {
        slidesPerView: 3,
        spaceBetween: 24,
        loop: true,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        },
        autoplay: {
          delay: 7000,
          disableOnInteraction: false
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true
        },
        breakpoints: {
          0: {slidesPerView: 1},
          768: {slidesPerView: 2},
          900: {slidesPerView: 3}
        }
      });
    })
    .catch(error => {
      swiperWrapper.innerHTML = "<p style='color:#cc5500; font-size:2rem; text-align:center; padding:40px 0;'>Failed to load products.</p>";
      console.error(error);
    });
});
  </script>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<!-- Your main script block follows -->
</body>

</html>